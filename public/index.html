
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AstroFood Premium Gold â€“ Chef-AI & Boutique</title>
  <meta name="description" content="AstroFood Premium Gold : Chef-AI connectÃ© Ã  /api/chefai + boutique de packs digitaux. FR / EN / AR." />
  <meta name="theme-color" content="#020617" />

  <!-- Police arabe -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --gold: #FBBF24;
      --amber: #f59e0b;
      --bg: radial-gradient(circle at top, #0f172a, #020617 65%);
      --card-bg: rgba(15,23,42,0.9);
      --border-subtle: rgba(148,163,184,0.35);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      background: var(--bg);
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    body[dir="rtl"] {
      font-family: "Cairo", system-ui, -apple-system, "Segoe UI", sans-serif;
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 1.5rem 1.25rem 4.5rem;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 1.75rem;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: .75rem;
    }

    .brand-logo {
      width: 44px;
      height: 44px;
      border-radius: 999px;
      border: 1px solid rgba(251,191,36,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.35rem;
      background: radial-gradient(circle at 30% 0%, #facc15, #b45309 60%, #111827 100%);
      box-shadow: 0 0 28px rgba(251,191,36,0.28);
    }

    .brand-text-main {
      font-size: 1.1rem;
      letter-spacing: .09em;
      text-transform: uppercase;
      color: #e5e7eb;
    }

    .brand-text-sub {
      font-size: .8rem;
      color: #9ca3af;
    }

    .qr-block {
      display: flex;
      align-items: center;
      gap: .75rem;
    }

    .qr-box {
      width: 70px;
      height: 70px;
      border-radius: .75rem;
      border: 1px dashed rgba(251,191,36,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: .65rem;
      text-align: center;
      padding: .25rem;
    }

    .qr-legend {
      font-size: .75rem;
      color: #e5e7eb;
      max-width: 140px;
    }

    .qr-legend span {
      color: var(--gold);
      font-weight: 600;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: .35rem;
      padding: .2rem .6rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .12em;
      color: #9ca3af;
    }

    h1 {
      margin: .4rem 0 .35rem;
      font-size: 1.4rem;
      color: #f9fafb;
    }

    .subtitle {
      font-size: .85rem;
      color: #cbd5f5;
      max-width: 520px;
    }

    .lang-switch {
      display: flex;
      align-items: center;
      gap: .35rem;
      font-size: .8rem;
      color: #9ca3af;
    }

    .lang-switch button {
      border: none;
      background: transparent;
      color: #9ca3af;
      cursor: pointer;
      padding: .15rem .4rem;
      border-radius: 999px;
      font-size: .8rem;
    }

    .lang-switch button.is-active {
      color: #0f172a;
      background: linear-gradient(to right, #fbbf24, #f59e0b);
      font-weight: 600;
    }

    main {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .panel {
      border-radius: 1rem;
      border: 1px solid var(--border-subtle);
      background: radial-gradient(circle at 0% 0%, rgba(248,250,252,0.02), rgba(15,23,42,0.96));
      padding: 1.25rem 1rem;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      gap: .5rem;
      margin-bottom: .75rem;
    }

    .panel-title {
      font-size: .95rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .panel-desc {
      font-size: .8rem;
      color: #9ca3af;
      max-width: 420px;
    }

    .pill-mini {
      display: inline-flex;
      align-items: center;
      gap: .35rem;
      padding: .12rem .55rem;
      border-radius: 999px;
      border: 1px solid rgba(55,65,81,0.9);
      background: rgba(15,23,42,0.75);
      font-size: .7rem;
      color: #9ca3af;
    }

    .pill-mini span {
      color: var(--gold);
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: .75rem;
      margin-bottom: 1rem;
    }

    label {
      display: flex;
      flex-direction: column;
      gap: .25rem;
      font-size: .75rem;
      color: #9ca3af;
    }

    select {
      border-radius: .6rem;
      border: 1px solid rgba(55,65,81,0.9);
      background: #020617;
      color: #e5e7eb;
      padding: .4rem .55rem;
      font-size: .8rem;
    }

    select:focus {
      outline: 1px solid rgba(251,191,36,0.8);
      border-color: rgba(251,191,36,0.8);
    }

    .actions {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: .75rem;
    }

    .btn-main {
      border-radius: 999px;
      border: none;
      padding: .55rem 1.4rem;
      font-size: .85rem;
      font-weight: 600;
      cursor: pointer;
      background: radial-gradient(circle at 20% 0%, #facc15, #b45309 55%, #7c2d12 100%);
      color: #0f172a;
      box-shadow: 0 10px 30px rgba(248,250,252,0.1), 0 0 28px rgba(250,204,21,0.35);
      display: inline-flex;
      align-items: center;
      gap: .5rem;
    }

    .btn-main span.icon {
      font-size: 1rem;
    }

    .status {
      font-size: .8rem;
      color: #9ca3af;
    }

    .status strong {
      color: var(--gold);
    }

    /* Recettes */
    .recipes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: .85rem;
    }

    .recipe-card {
      border-radius: .9rem;
      border: 1px solid rgba(31,41,55,0.9);
      background: var(--card-bg);
      padding: .7rem .75rem .8rem;
      display: flex;
      flex-direction: column;
      gap: .25rem;
      min-height: 130px;
    }

    .recipe-kicker {
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .18em;
      color: #9ca3af;
    }

    .recipe-title {
      font-size: .9rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .recipe-body {
      font-size: .8rem;
      color: #cbd5e1;
      flex: 1;
    }

    .recipe-foot {
      font-size: .72rem;
      color: #94a3b8;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .5rem;
      margin-top: .3rem;
    }

    .recipe-tag {
      padding: .08rem .5rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      font-size: .7rem;
      color: #e5e7eb;
    }

    /* Boutique */
    .shop-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: .9rem;
    }

    .pack-card {
      border-radius: 1rem;
      border: 1px solid rgba(55,65,81,0.9);
      background: radial-gradient(circle at 0% 0%, rgba(251,191,36,0.08), rgba(15,23,42,0.98));
      padding: .9rem .85rem .95rem;
      display: flex;
      flex-direction: column;
      gap: .4rem;
    }

    .pack-badge-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .5rem;
      font-size: .7rem;
    }

    .pack-pill {
      padding: .05rem .5rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      text-transform: uppercase;
      letter-spacing: .15em;
      color: #e5e7eb;
    }

    .pack-tagline {
      font-size: .7rem;
      color: #fbbf24;
      text-align: right;
    }

    .pack-title {
      font-size: .95rem;
      font-weight: 600;
      color: #f9fafb;
    }

    .pack-desc {
      font-size: .78rem;
      color: #cbd5e1;
    }

    .pack-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: .25rem;
      font-size: .8rem;
      color: #e5e7eb;
    }

    .pack-price-main {
      font-weight: 600;
      color: var(--gold);
    }

    .pack-price-note {
      font-size: .7rem;
      color: #9ca3af;
    }

    .pack-btn-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .5rem;
      margin-top: .5rem;
    }

    .btn-pack {
      flex: 1;
      border-radius: 999px;
      border: none;
      padding: .4rem .85rem;
      font-size: .8rem;
      font-weight: 600;
      cursor: pointer;
      background: #020617;
      color: #e5e7eb;
      border: 1px solid rgba(148,163,184,0.7);
    }

    .btn-pack.primary {
      background: linear-gradient(to right, #fbbf24, #f97316);
      color: #111827;
      border: none;
    }

    .btn-pack:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    footer {
      margin-top: 1.5rem;
      font-size: .7rem;
      color: #6b7280;
      text-align: center;
    }

    footer span {
      color: var(--gold);
    }

    /* Chat */
    .chat-toggle {
      position: fixed;
      right: 1rem;
      bottom: 1rem;
      z-index: 20;
      border-radius: 999px;
      border: none;
      padding: .55rem 1rem;
      font-size: .8rem;
      font-weight: 600;
      cursor: pointer;
      background: radial-gradient(circle at 20% 0%, #facc15, #b45309 55%, #7c2d12 100%);
      color: #0f172a;
      box-shadow: 0 10px 30px rgba(15,23,42,0.75), 0 0 24px rgba(250,204,21,0.35);
      display: inline-flex;
      align-items: center;
      gap: .4rem;
    }

    .chat-panel {
      position: fixed;
      right: 1rem;
      bottom: 3.3rem;
      width: 290px;
      max-height: 360px;
      border-radius: 1rem;
      border: 1px solid rgba(55,65,81,0.9);
      background: radial-gradient(circle at 0% 0%, rgba(248,250,252,0.03), #020617);
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 25;
    }

    .chat-panel.open {
      display: flex;
    }

    .chat-head {
      padding: .55rem .7rem;
      border-bottom: 1px solid rgba(31,41,55,0.9);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .5rem;
    }

    .chat-head-title {
      font-size: .78rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .chat-head-sub {
      font-size: .7rem;
      color: #9ca3af;
    }

    .chat-close {
      border: none;
      background: transparent;
      color: #9ca3af;
      cursor: pointer;
      font-size: 1rem;
    }

    .chat-messages {
      flex: 1;
      padding: .55rem .7rem;
      overflow-y: auto;
      font-size: .76rem;
      display: flex;
      flex-direction: column;
      gap: .4rem;
    }

    .msg {
      padding: .35rem .5rem;
      border-radius: .7rem;
      max-width: 85%;
    }

    .msg.user {
      margin-left: auto;
      background: rgba(251,191,36,0.1);
      border-bottom-right-radius: .15rem;
    }

    .msg.ai {
      margin-right: auto;
      background: rgba(15,23,42,0.95);
      border: 1px solid rgba(31,41,55,0.9);
      border-bottom-left-radius: .15rem;
    }

    .chat-input-row {
      border-top: 1px solid rgba(31,41,55,0.9);
      padding: .45rem .55rem;
      display: flex;
      gap: .4rem;
      align-items: center;
    }

    .chat-input-row input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(55,65,81,0.9);
      background: #020617;
      color: #e5e7eb;
      padding: .3rem .7rem;
      font-size: .75rem;
    }

    .chat-input-row button {
      border-radius: 999px;
      border: none;
      padding: .35rem .65rem;
      font-size: .75rem;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(to right, #fbbf24, #f97316);
      color: #111827;
    }

    @media (max-width: 640px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      .qr-block {
        align-self: stretch;
        justify-content: space-between;
      }
      .chat-panel {
        right: .5rem;
        left: .5rem;
        width: auto;
      }
      .chat-toggle {
        right: .5rem;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="brand">
        <div class="brand-logo">â™¨ï¸</div>
        <div>
          <div class="brand-text-main">AstroFood Premium Gold</div>
          <div class="brand-text-sub" data-i18n="brandTagline">
            Chef-AI, recettes & cartes digitales reliÃ©es Ã  ton signe.
          </div>
        </div>
      </div>

      <div class="qr-block">
        <div class="qr-box">
          <!-- Remplace l'image ci-dessous par ton vrai QR si besoin -->
          <span data-i18n="qrInside">QR<br/>WhatsApp<br/>ou Boutique</span>
        </div>
        <div class="qr-legend" data-i18n="qrLegend">
          Scanne le <span>QR dorÃ©</span> pour discuter, commander un pack ou recevoir lâ€™aide Chef-AI.
        </div>
      </div>
    </header>

    <div style="display:flex;justify-content:space-between;align-items:center;gap:.75rem;margin-bottom:1rem;">
      <div>
        <div class="pill" data-i18n="pillLabel">
          CONNECTÃ‰ Ã€ TON BACKEND /API/CHEFAI
        </div>
        <h1 data-i18n="pageTitle">
          Chef-AI : paramÃ¨tres & boutique AstroFood
        </h1>
        <p class="subtitle" data-i18n="pageSubtitle">
          Signe âœ§ Ã©tat âœ§ repas â†’ 3 recettes IA prÃªtes Ã  afficher sur ta carte digitale, plus des packs Ã  vendre.
        </p>
      </div>
      <div class="lang-switch">
        <span data-i18n="langLabel">Langue UI :</span>
        <button type="button" data-lang="fr" class="is-active">FR</button>
        <button type="button" data-lang="en">EN</button>
        <button type="button" data-lang="ar">Ø¹</button>
      </div>
    </div>

    <main>
      <!-- PARAMÃˆTRES CHEF-AI -->
      <section class="panel" id="chef-panel">
        <div class="panel-header">
          <div>
            <div class="panel-title" data-i18n="chefTitle">
              ParamÃ¨tres Chef-AI
            </div>
            <div class="panel-desc" data-i18n="chefDesc">
              Ces champs sont envoyÃ©s Ã  <code>/api/chefai</code>. Ton backend renvoie 3 recettes personnalisÃ©es pour ce signe, cet Ã©tat Ã©nergÃ©tique et ce type de repas.
            </div>
          </div>
          <div class="pill-mini" data-i18n="chefPill">
            Mode : <span>recipes</span> Â· JSON propre
          </div>
        </div>

        <div class="form-grid">
          <label>
            <span data-i18n="labelSign">Signe astrologique</span>
            <select id="sign">
              <option value="aries">â™ˆ BÃ©lier</option>
              <option value="taurus">â™‰ Taureau</option>
              <option value="gemini">â™Š GÃ©meaux</option>
              <option value="cancer">â™‹ Cancer</option>
              <option value="leo">â™Œ Lion</option>
              <option value="virgo">â™ Vierge</option>
              <option value="libra">â™ Balance</option>
              <option value="scorpio">â™ Scorpion</option>
              <option value="sagittarius">â™ Sagittaire</option>
              <option value="capricorn">â™‘ Capricorne</option>
              <option value="aquarius">â™’ Verseau</option>
              <option value="pisces">â™“ Poissons</option>
            </select>
          </label>

          <label>
            <span data-i18n="labelState">Ã‰tat Ã©nergÃ©tique</span>
            <select id="state">
              <option value="equilibre" data-i18n="stateBalanced">Ã‰quilibre</option>
              <option value="energie" data-i18n="stateEnergy">+ Ã‰nergie</option>
              <option value="detente" data-i18n="stateRelax">Relax / DÃ©tente</option>
              <option value="focus" data-i18n="stateFocus">Focus / Travail</option>
              <option value="romantique" data-i18n="stateLove">Romantique</option>
            </select>
          </label>

          <label>
            <span data-i18n="labelMeal">Type de repas</span>
            <select id="meal">
              <option value="petit_dej" data-i18n="mealBreakfast">Petit dÃ©jeuner</option>
              <option value="dejeuner" data-i18n="mealLunch">DÃ©jeuner</option>
              <option value="diner" data-i18n="mealDinner">DÃ®ner</option>
              <option value="snack" data-i18n="mealSnack">Snack / Boisson</option>
            </select>
          </label>

          <label>
            <span data-i18n="labelLang">Langue des recettes</span>
            <select id="recipes-lang">
              <option value="fr">FranÃ§ais</option>
              <option value="en">English</option>
              <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            </select>
          </label>
        </div>

        <div class="actions">
          <button class="btn-main" id="generate-btn">
            <span class="icon">âœ¨</span>
            <span data-i18n="btnGenerate">GÃ©nÃ©rer 3 recettes avec Chef-AI</span>
          </button>
          <div class="status" id="status" data-i18n="statusIdle">
            PrÃªt. Clique pour interroger ton backend <strong>/api/chefai</strong>.
          </div>
        </div>
      </section>

      <!-- RECETTES GÃ‰NÃ‰RÃ‰ES -->
      <section class="panel">
        <div class="panel-header">
          <div>
            <div class="panel-title" data-i18n="recipesTitle">
              Recettes gÃ©nÃ©rÃ©es (JSON â†’ cartes)
            </div>
            <div class="panel-desc" data-i18n="recipesDesc">
              On affiche ici le titre, une courte explication de prÃ©paration/cuisson et une note Ã©nergÃ©tique. Tu peux ensuite pousser ces recettes vers ta carte digitale AstroFood.
            </div>
          </div>
        </div>

        <div class="recipes-grid" id="recipes-grid">
          <article class="recipe-card">
            <div class="recipe-kicker" data-i18n="recipesPlaceholderKicker">
              En attente
            </div>
            <div class="recipe-title" data-i18n="recipesPlaceholderTitle">
              Clique sur Â« GÃ©nÃ©rer Â» pour voir les idÃ©es de Chef-AI.
            </div>
            <div class="recipe-body" data-i18n="recipesPlaceholderBody">
              Tes 3 recettes personnalisÃ©es (prÃ©paration, cuisson, tips) apparaÃ®tront ici sous forme de cartes prÃªtes Ã  afficher sur AstroFood.
            </div>
            <div class="recipe-foot">
              <span class="recipe-tag" data-i18n="recipesPlaceholderTag">PrÃ©paration & cuisson</span>
              <span>â± ~</span>
            </div>
          </article>
        </div>
      </section>

      <!-- BOUTIQUE ASTROFOOD -->
      <section class="panel">
        <div class="panel-header">
          <div>
            <div class="panel-title" data-i18n="shopTitle">
              Boutique AstroFood â€“ Packs digitaux
            </div>
            <div class="panel-desc" data-i18n="shopDesc">
              Ces cartes reprÃ©sentent tes packs LemonSqueezy (ou autre). Chaque bouton Â« Acheter Â» peut pointer vers lâ€™URL de paiement correspondante.
            </div>
          </div>
          <div class="pill-mini" data-i18n="shopPill">
            Connecte ici tes liens de paiement
          </div>
        </div>

        <div class="shop-grid">
          <article class="pack-card">
            <div class="pack-badge-row">
              <div class="pack-pill" data-i18n="pack1Badge">Starter Pack</div>
              <div class="pack-tagline" data-i18n="pack1Tagline">3 signes Â· PDF + PNG</div>
            </div>
            <div class="pack-title" data-i18n="pack1Title">
              Mini-pack AstroFood (3 signes)
            </div>
            <div class="pack-desc" data-i18n="pack1Desc">
              Pour tester le concept : 3 cartes digitales complÃ¨tes (FR/EN/AR) pour 3 signes au choix, prÃªtes Ã  envoyer Ã  tes clients.
            </div>
            <div class="pack-meta">
              <div>
                <div class="pack-price-main" data-i18n="pack1Price">9,90 â‚¬</div>
                <div class="pack-price-note" data-i18n="pack1Note">Licence perso / test</div>
              </div>
              <div class="pack-price-note" data-i18n="pack1Format">Format : PNG + PDF</div>
            </div>
            <div class="pack-btn-row">
              <button class="btn-pack primary" data-pack="starter" data-i18n="btnBuy">
                Acheter le pack
              </button>
              <button class="btn-pack" data-i18n="btnDetails">
                Voir dÃ©tail
              </button>
            </div>
          </article>

          <article class="pack-card">
            <div class="pack-badge-row">
              <div class="pack-pill" data-i18n="pack2Badge">Full Zodiac</div>
              <div class="pack-tagline" data-i18n="pack2Tagline">12 signes Â· Chef-AI ready</div>
            </div>
            <div class="pack-title" data-i18n="pack2Title">
              Pack complet 12 signes â€“ Premium Gold
            </div>
            <div class="pack-desc" data-i18n="pack2Desc">
              Les 12 cartes AstroFood Premium Gold prÃªtes Ã  vendre, alignÃ©es avec Chef-AI (3 repas par signe, 3 modes Ã©nergÃ©tiques, FR/EN/AR).
            </div>
            <div class="pack-meta">
              <div>
                <div class="pack-price-main" data-i18n="pack2Price">39,00 â‚¬</div>
                <div class="pack-price-note" data-i18n="pack2Note">Usage pro / restaurant</div>
              </div>
              <div class="pack-price-note" data-i18n="pack2Format">Fichiers HD + sources</div>
            </div>
            <div class="pack-btn-row">
              <button class="btn-pack primary" data-pack="full" data-i18n="btnBuy">
                Acheter le pack
              </button>
              <button class="btn-pack" data-i18n="btnDetails">
                Voir dÃ©tail
              </button>
            </div>
          </article>

          <article class="pack-card">
            <div class="pack-badge-row">
              <div class="pack-pill" data-i18n="pack3Badge">Africa+</div>
              <div class="pack-tagline" data-i18n="pack3Tagline">Afro-Senegal Â· Local</div>
            </div>
            <div class="pack-title" data-i18n="pack3Title">
              Extension Â« Africa+ Â» â€“ Recettes locales
            </div>
            <div class="pack-desc" data-i18n="pack3Desc">
              Pack bonus avec une sÃ©lection de recettes afro-sÃ©nÃ©galaises par signe (fonio, bouye, bissap, mil, etc.), intÃ©grables Ã  Chef-AI.
            </div>
            <div class="pack-meta">
              <div>
                <div class="pack-price-main" data-i18n="pack3Price">19,00 â‚¬</div>
                <div class="pack-price-note" data-i18n="pack3Note">Add-on pour la carte</div>
              </div>
              <div class="pack-price-note" data-i18n="pack3Format">Recettes + visuels</div>
            </div>
            <div class="pack-btn-row">
              <button class="btn-pack primary" data-pack="africa" data-i18n="btnBuy">
                Acheter le pack
              </button>
              <button class="btn-pack" data-i18n="btnDetails">
                Voir dÃ©tail
              </button>
            </div>
          </article>
        </div>
      </section>
    </main>

    <footer>
      <span>AstroFood Premium Gold</span> Â· Chef-AI connectÃ© Ã  ton backend Â· UI statique prÃªte Ã  lâ€™emploi (FR / EN / AR).
    </footer>
  </div>

  <!-- CHAT FLOTTANT CHEF-AI -->
  <button class="chat-toggle" id="chat-toggle">
    ğŸ’¬ Chef-AI
  </button>

  <div class="chat-panel" id="chat-panel">
    <div class="chat-head">
      <div>
        <div class="chat-head-title" data-i18n="chatTitle">Chef-AI â€“ chat rapide</div>
        <div class="chat-head-sub" data-i18n="chatSubtitle">Pose une question courte sur les recettes ou ton signe.</div>
      </div>
      <button class="chat-close" id="chat-close" aria-label="Fermer">Ã—</button>
    </div>
    <div class="chat-messages" id="chat-messages">
      <div class="msg ai" data-i18n="chatWelcome">
        Salut, je suis Chef-AI. Dis-moi ton signe et ce que tu cherches (par ex. Â« idÃ©e de dÃ®ner lÃ©ger pour Lion Â»).
      </div>
    </div>
    <form class="chat-input-row" id="chat-form">
      <input type="text" id="chat-input" autocomplete="off" placeholder="Ex : Recette afro pour Cancer ce soirâ€¦" />
      <button type="submit" id="chat-send">OK</button>
    </form>
  </div>

  <script>           
    // ------------------ CONFIG API ------------------
    // Si tu es en local avec un backend Express sur 3000 :
    // const API_URL = "http://localhost:3000/api/chefai";
    // Si ton HTML est servi par le mÃªme domaine que /api/chefai :
   const API_URL = "/api/chefai";
   


    // ------------------ I18N (FR / EN / AR) ------------------
    const i18n = {
      fr: {
        brandTagline: "Chef-AI, recettes & cartes digitales reliÃ©es Ã  ton signe.",
        qrInside: "QR\nWhatsApp\nou Boutique",
        qrLegend: "Scanne le <span>QR dorÃ©</span> pour discuter, commander un pack ou recevoir lâ€™aide Chef-AI.",
        pillLabel: "CONNECTÃ‰ Ã€ TON BACKEND /API/CHEFAI",
        pageTitle: "Chef-AI : paramÃ¨tres & boutique AstroFood",
        pageSubtitle: "Signe âœ§ Ã©tat âœ§ repas â†’ 3 recettes IA prÃªtes Ã  afficher sur ta carte digitale, plus des packs Ã  vendre.",
        langLabel: "Langue UI :",
        chefTitle: "ParamÃ¨tres Chef-AI",
        chefDesc: "Ces champs sont envoyÃ©s Ã  <code>/api/chefai</code>. Ton backend renvoie 3 recettes personnalisÃ©es pour ce signe, cet Ã©tat Ã©nergÃ©tique et ce type de repas.",
        chefPill: "Mode : <span>recipes</span> Â· JSON propre",
        labelSign: "Signe astrologique",
        labelState: "Ã‰tat Ã©nergÃ©tique",
        labelMeal: "Type de repas",
        labelLang: "Langue des recettes",
        stateBalanced: "Ã‰quilibre",
        stateEnergy: "+ Ã‰nergie",
        stateRelax: "Relax / DÃ©tente",
        stateFocus: "Focus / Travail",
        stateLove: "Romantique",
        mealBreakfast: "Petit dÃ©jeuner",
        mealLunch: "DÃ©jeuner",
        mealDinner: "DÃ®ner",
        mealSnack: "Snack / Boisson",
        btnGenerate: "GÃ©nÃ©rer 3 recettes avec Chef-AI",
        statusIdle: "PrÃªt. Clique pour interroger ton backend <strong>/api/chefai</strong>.",
        statusLoading: "GÃ©nÃ©ration en coursâ€¦ Chef-AI prÃ©pare 3 recettes.",
        statusOk: "Recettes reÃ§ues depuis <strong>/api/chefai</strong>.",
        statusError: "Erreur : vÃ©rifie ton backend /api/chefai ou la console.",
        recipesTitle: "Recettes gÃ©nÃ©rÃ©es (JSON â†’ cartes)",
        recipesDesc: "On affiche ici le titre, une courte explication de prÃ©paration/cuisson et une note Ã©nergÃ©tique. Tu peux ensuite pousser ces recettes vers ta carte digitale AstroFood.",
        recipesPlaceholderKicker: "En attente",
        recipesPlaceholderTitle: "Clique sur Â« GÃ©nÃ©rer Â» pour voir les idÃ©es de Chef-AI.",
        recipesPlaceholderBody: "Tes 3 recettes personnalisÃ©es (prÃ©paration, cuisson, tips) apparaÃ®tront ici sous forme de cartes prÃªtes Ã  afficher sur AstroFood.",
        recipesPlaceholderTag: "PrÃ©paration & cuisson",
        shopTitle: "Boutique AstroFood â€“ Packs digitaux",
        shopDesc: "Ces cartes reprÃ©sentent tes packs LemonSqueezy (ou autre). Chaque bouton Â« Acheter Â» peut pointer vers lâ€™URL de paiement correspondante.",
        shopPill: "Connecte ici tes liens de paiement",
        pack1Badge: "Starter Pack",
        pack1Tagline: "3 signes Â· PDF + PNG",
        pack1Title: "Mini-pack AstroFood (3 signes)",
        pack1Desc: "Pour tester le concept : 3 cartes digitales complÃ¨tes (FR/EN/AR) pour 3 signes au choix, prÃªtes Ã  envoyer Ã  tes clients.",
        pack1Price: "9,90 â‚¬",
        pack1Note: "Licence perso / test",
        pack1Format: "Format : PNG + PDF",
        pack2Badge: "Full Zodiac",
        pack2Tagline: "12 signes Â· Chef-AI ready",
        pack2Title: "Pack complet 12 signes â€“ Premium Gold",
        pack2Desc: "Les 12 cartes AstroFood Premium Gold prÃªtes Ã  vendre, alignÃ©es avec Chef-AI (3 repas par signe, 3 modes Ã©nergÃ©tiques, FR/EN/AR).",
        pack2Price: "39,00 â‚¬",
        pack2Note: "Usage pro / restaurant",
        pack2Format: "Fichiers HD + sources",
        pack3Badge: "Africa+",
        pack3Tagline: "Afro-Senegal Â· Local",
        pack3Title: "Extension Â« Africa+ Â» â€“ Recettes locales",
        pack3Desc: "Pack bonus avec une sÃ©lection de recettes afro-sÃ©nÃ©galaises par signe (fonio, bouye, bissap, mil, etc.), intÃ©grables Ã  Chef-AI.",
        pack3Price: "19,00 â‚¬",
        pack3Note: "Add-on pour la carte",
        pack3Format: "Recettes + visuels",
        btnBuy: "Acheter le pack",
        btnDetails: "Voir dÃ©tail",
        chatTitle: "Chef-AI â€“ chat rapide",
        chatSubtitle: "Pose une question courte sur les recettes ou ton signe.",
        chatWelcome: "Salut, je suis Chef-AI. Dis-moi ton signe et ce que tu cherches (par ex. Â« idÃ©e de dÃ®ner lÃ©ger pour Lion Â»).",
      },
      en: {
        brandTagline: "Chef-AI, recipes & digital cards linked to your sign.",
        qrInside: "QR\nWhatsApp\nor Shop",
        qrLegend: "Scan the <span>gold QR</span> to chat, order a pack or get Chef-AI help.",
        pillLabel: "CONNECTED TO YOUR /API/CHEFAI BACKEND",
        pageTitle: "Chef-AI: parameters & AstroFood shop",
        pageSubtitle: "Sign âœ§ state âœ§ meal â†’ 3 AI recipes ready to show on your digital card, plus packs to sell.",
        langLabel: "UI language:",
        chefTitle: "Chef-AI parameters",
        chefDesc: "These fields are sent to <code>/api/chefai</code>. Your backend returns 3 recipes for this sign, energy state and meal type.",
        chefPill: "Mode: <span>recipes</span> Â· clean JSON",
        labelSign: "Zodiac sign",
        labelState: "Energy state",
        labelMeal: "Meal type",
        labelLang: "Recipes language",
        stateBalanced: "Balanced",
        stateEnergy: "+ Energy",
        stateRelax: "Relax / Chill",
        stateFocus: "Focus / Work",
        stateLove: "Romantic",
        mealBreakfast: "Breakfast",
        mealLunch: "Lunch",
        mealDinner: "Dinner",
        mealSnack: "Snack / Drink",
        btnGenerate: "Generate 3 recipes with Chef-AI",
        statusIdle: "Ready. Click to query your <strong>/api/chefai</strong> backend.",
        statusLoading: "Generatingâ€¦ Chef-AI is preparing 3 recipes.",
        statusOk: "Recipes received from <strong>/api/chefai</strong>.",
        statusError: "Error: check your /api/chefai backend or the console.",
        recipesTitle: "Generated recipes (JSON â†’ cards)",
        recipesDesc: "We display here the title, a short preparation/cooking explanation and an energy note. Then you can push them to your AstroFood digital card.",
        recipesPlaceholderKicker: "Waiting",
        recipesPlaceholderTitle: "Click â€œGenerateâ€ to see Chef-AI ideas.",
        recipesPlaceholderBody: "Your 3 personalized recipes (prep, cooking, tips) will appear here as cards ready for AstroFood.",
        recipesPlaceholderTag: "Preparation & cooking",
        shopTitle: "AstroFood shop â€“ Digital packs",
        shopDesc: "These cards represent your LemonSqueezy (or other) packs. Each â€œBuyâ€ button can point to the payment URL.",
        shopPill: "Connect your payment links here",
        pack1Badge: "Starter Pack",
        pack1Tagline: "3 signs Â· PDF + PNG",
        pack1Title: "Mini AstroFood pack (3 signs)",
        pack1Desc: "To test the concept: 3 full digital cards (FR/EN/AR) for 3 signs of your choice, ready to send to clients.",
        pack1Price: "9.90 â‚¬",
        pack1Note: "Personal / test licence",
        pack1Format: "Format: PNG + PDF",
        pack2Badge: "Full Zodiac",
        pack2Tagline: "12 signs Â· Chef-AI ready",
        pack2Title: "Full 12-sign pack â€“ Premium Gold",
        pack2Desc: "The 12 AstroFood Premium Gold cards ready to sell, aligned with Chef-AI (3 meals per sign, 3 energy modes, FR/EN/AR).",
        pack2Price: "39.00 â‚¬",
        pack2Note: "Pro / restaurant use",
        pack2Format: "HD files + sources",
        pack3Badge: "Africa+",
        pack3Tagline: "Afro-Senegal Â· Local",
        pack3Title: "â€œAfrica+â€ extension â€“ Local recipes",
        pack3Desc: "Bonus pack with a selection of Afro-Senegalese recipes by sign (fonio, baobab, hibiscus, millet, etc.), ready for Chef-AI.",
        pack3Price: "19.00 â‚¬",
        pack3Note: "Add-on for the card",
        pack3Format: "Recipes + visuals",
        btnBuy: "Buy pack",
        btnDetails: "See details",
        chatTitle: "Chef-AI â€“ quick chat",
        chatSubtitle: "Ask a short question about recipes or your sign.",
        chatWelcome: "Hi, Iâ€™m Chef-AI. Tell me your sign and what you need (e.g. â€œlight dinner idea for Leoâ€).",
      },
      ar: {
        brandTagline: "Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠØŒ ÙˆØµÙØ§Øª ÙˆØ¨Ø·Ø§Ù‚Ø§Øª Ø±Ù‚Ù…ÙŠØ© Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¨Ø±Ø¬Ùƒ.",
        qrInside: "Ø±Ù…Ø²\nÙˆØ§ØªØ³Ø§Ø¨\nØ£Ùˆ Ø§Ù„Ù…ØªØ¬Ø±",
        qrLegend: "Ø§Ù…Ø³Ø­ <span>Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø°Ù‡Ø¨ÙŠ</span> Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©ØŒ Ø·Ù„Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø£Ùˆ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ.",
        pillLabel: "Ù…ÙØªÙ‘ÙØµÙÙ„ Ø¨Ø®Ù„ÙÙŠØªÙƒ /API/CHEFAI",
        pageTitle: "Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ: Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆÙ…ØªØ¬Ø± Ø£Ø³ØªØ±ÙˆÙÙˆØ¯",
        pageSubtitle: "Ø¨Ø±Ø¬ âœ§ Ø­Ø§Ù„Ø© âœ§ ÙˆØ¬Ø¨Ø© â†’ Ù£ ÙˆØµÙØ§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠØ©ØŒ Ù…Ø¹ Ø¨Ø§Ù‚Ø§Øª Ù„Ù„Ø¨ÙŠØ¹.",
        langLabel: "Ù„ØºØ© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©:",
        chefTitle: "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ",
        chefDesc: "ØªÙØ±Ø³ÙÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¥Ù„Ù‰ <code>/api/chefai</code>. Ø§Ù„Ø®Ù„ÙÙŠØ© ØªÙØ±Ø¬ÙØ¹ Ù£ ÙˆØµÙØ§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±Ø¬ØŒ ÙˆÙ‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ø§Ù‚ÙŠØ© ÙˆÙ†ÙˆØ¹ Ø§Ù„ÙˆØ¬Ø¨Ø©.",
        chefPill: "Ø§Ù„ÙˆØ¶Ø¹: <span>recipes</span> Â· JSON Ù†Ø¸ÙŠÙ",
        labelSign: "Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„ÙÙ„ÙƒÙŠ",
        labelState: "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ø§Ù‚ÙŠØ©",
        labelMeal: "Ù†ÙˆØ¹ Ø§Ù„ÙˆØ¬Ø¨Ø©",
        labelLang: "Ù„ØºØ© Ø§Ù„ÙˆØµÙØ§Øª",
        stateBalanced: "ØªÙˆØ§Ø²Ù†",
        stateEnergy: "+ Ø·Ø§Ù‚Ø©",
        stateRelax: "Ø§Ø³ØªØ±Ø®Ø§Ø¡",
        stateFocus: "ØªØ±ÙƒÙŠØ² / Ø¹Ù…Ù„",
        stateLove: "Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ",
        mealBreakfast: "ÙØ·ÙˆØ±",
        mealLunch: "ØºØ¯Ø§Ø¡",
        mealDinner: "Ø¹Ø´Ø§Ø¡",
        mealSnack: "Ø³Ù†Ø§Ùƒ / Ù…Ø´Ø±ÙˆØ¨",
        btnGenerate: "Ø¥Ù†Ø´Ø§Ø¡ Ù£ ÙˆØµÙØ§Øª Ù…Ø¹ Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ",
        statusIdle: "Ø¬Ø§Ù‡Ø². Ø§Ø¶ØºØ· Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ <strong>/api/chefai</strong>.",
        statusLoading: "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡â€¦ Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ ÙŠØ­Ø¶Ù‘Ø± Ù£ ÙˆØµÙØ§Øª.",
        statusOk: "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ÙˆØµÙØ§Øª Ù…Ù† <strong>/api/chefai</strong>.",
        statusError: "Ø®Ø·Ø£: ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† /api/chefai Ø£Ùˆ Ù…Ù† ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ….",
        recipesTitle: "Ø§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø© (JSON â†’ Ø¨Ø·Ø§Ù‚Ø§Øª)",
        recipesDesc: "Ù†Ø¹Ø±Ø¶ Ù‡Ù†Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ø´Ø±Ø­Ù‹Ø§ Ù…Ø®ØªØµØ±Ù‹Ø§ Ù„Ù„ØªØ­Ø¶ÙŠØ±/Ø§Ù„Ø·Ù‡ÙŠ ÙˆÙ…Ù„Ø§Ø­Ø¸Ø© Ø·Ø§Ù‚ÙŠØ©. Ø¨Ø¹Ø¯Ù‡Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¥Ù„Ù‰ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø£Ø³ØªØ±ÙˆÙÙˆØ¯.",
        recipesPlaceholderKicker: "ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
        recipesPlaceholderTitle: "Ø§Ø¶ØºØ· Â« Ø¥Ù†Ø´Ø§Ø¡ Â» Ù„Ø±Ø¤ÙŠØ© Ø£ÙÙƒØ§Ø± Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ.",
        recipesPlaceholderBody: "Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ù£ ÙˆØµÙØ§Øª Ù…Ø®ØµØµØ© (ØªØ­Ø¶ÙŠØ±ØŒ Ø·Ù‡ÙŠØŒ Ù†ØµØ§Ø¦Ø­) Ø¹Ù„Ù‰ Ø´ÙƒÙ„ Ø¨Ø·Ø§Ù‚Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ù„Ø£Ø³ØªØ±ÙˆÙÙˆØ¯.",
        recipesPlaceholderTag: "ØªØ­Ø¶ÙŠØ± ÙˆØ·Ù‡ÙŠ",
        shopTitle: "Ù…ØªØ¬Ø± Ø£Ø³ØªØ±ÙˆÙÙˆØ¯ â€“ Ø¨Ø§Ù‚Ø§Øª Ø±Ù‚Ù…ÙŠØ©",
        shopDesc: "ØªÙ…Ø«Ù‘Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨Ø§Ù‚Ø§ØªÙƒ ÙÙŠ LemonSqueezy (Ø£Ùˆ ØºÙŠØ±Ù‡). ÙƒÙ„ Ø²Ø± Â« Ø´Ø±Ø§Ø¡ Â» ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø·Ù‡ Ø¨Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡.",
        shopPill: "Ø§Ø±Ø¨Ø· Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¯ÙØ¹ Ù‡Ù†Ø§",
        pack1Badge: "Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©",
        pack1Tagline: "Ù£ Ø£Ø¨Ø±Ø§Ø¬ Â· PDF + PNG",
        pack1Title: "Ø¨Ø§Ù‚Ø© Ø£Ø³ØªØ±ÙˆÙÙˆØ¯ Ø§Ù„ØµØºÙŠØ±Ø© (Ù£ Ø£Ø¨Ø±Ø§Ø¬)",
        pack1Desc: "Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙÙƒØ±Ø©: Ù£ Ø¨Ø·Ø§Ù‚Ø§Øª Ø±Ù‚Ù…ÙŠØ© ÙƒØ§Ù…Ù„Ø© (ÙØ±/Ø¥Ù†/Ø¹Ø±) Ù„Ø«Ù„Ø§Ø«Ø© Ø£Ø¨Ø±Ø§Ø¬ Ø­Ø³Ø¨ Ø§Ø®ØªÙŠØ§Ø±ÙƒØŒ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø²Ø¨Ø§Ø¦Ù†.",
        pack1Price: "Ù©Ù«Ù©Ù  â‚¬",
        pack1Note: "ØªØ±Ø®ÙŠØµ Ø´Ø®ØµÙŠ / ØªØ¬Ø±ÙŠØ¨ÙŠ",
        pack1Format: "Ø§Ù„ØµÙŠØºØ©: PNG + PDF",
        pack2Badge: "Ø§Ù„Ø£Ø¨Ø±Ø§Ø¬ Ø§Ù„ÙƒØ§Ù…Ù„Ø©",
        pack2Tagline: "Ù¡Ù¢ Ø¨Ø±Ø¬Ù‹Ø§ Â· Ø¬Ø§Ù‡Ø² Ù„Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ",
        pack2Title: "Ø¨Ø§Ù‚Ø© Ù¡Ù¢ Ø¨Ø±Ø¬ â€“ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… Ø¬ÙˆÙ„Ø¯",
        pack2Desc: "ÙƒÙ„ Ø¨Ø·Ø§Ù‚Ø§Øª Ø£Ø³ØªØ±ÙˆÙÙˆØ¯ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… Ø¬ÙˆÙ„Ø¯ Ø§Ù„Ù€Ù¡Ù¢ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¨ÙŠØ¹ØŒ Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ (Ù£ ÙˆØ¬Ø¨Ø§Øª Ù„ÙƒÙ„ Ø¨Ø±Ø¬ØŒ Ù£ Ø£ÙˆØ¶Ø§Ø¹ Ø·Ø§Ù‚ÙŠØ©ØŒ ÙØ±/Ø¥Ù†/Ø¹Ø±).",
        pack2Price: "Ù£Ù©Ù«Ù Ù  â‚¬",
        pack2Note: "Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø§Ø­ØªØ±Ø§ÙÙŠ / Ù…Ø·Ø¹Ù…",
        pack2Format: "Ù…Ù„ÙØ§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¯Ù‚Ø© + Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØµØ¯Ø±",
        pack3Badge: "Ø£ÙØ±ÙŠÙƒØ§+",
        pack3Tagline: "Ø£ÙØ±Ùˆ-Ø³Ù†ØºØ§Ù„ Â· Ù…Ø­Ù„ÙŠ",
        pack3Title: "Ø¥Ø¶Ø§ÙØ© Â« Africa+ Â» â€“ ÙˆØµÙØ§Øª Ù…Ø­Ù„ÙŠØ©",
        pack3Desc: "Ø¨Ø§Ù‚Ø© Ø¥Ø¶Ø§ÙÙŠØ© ØªØ¶Ù… Ù…Ø¬Ù…ÙˆØ¹Ø© ÙˆØµÙØ§Øª Ø£ÙØ±Ùˆ-Ø³Ù†ØºØ§Ù„ÙŠØ© Ù„ÙƒÙ„ Ø¨Ø±Ø¬ (ÙÙˆÙ†ÙˆØŒ Ø¨ÙˆØ¨Ø§Ø¨ØŒ ÙƒØ±ÙƒØ¯ÙŠÙ‡ØŒ Ø¯Ø®Ù†â€¦)ØŒ Ø¬Ø§Ù‡Ø²Ø© Ù„Ø¯Ù…Ø¬Ù‡Ø§ Ù…Ø¹ Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ.",
        pack3Price: "Ù¡Ù©Ù«Ù Ù  â‚¬",
        pack3Note: "Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¨Ø·Ø§Ù‚Ø©",
        pack3Format: "ÙˆØµÙØ§Øª + ØµÙˆØ±",
        btnBuy: "Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø©",
        btnDetails: "Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„",
        chatTitle: "Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ â€“ Ù…Ø­Ø§Ø¯Ø«Ø© Ø³Ø±ÙŠØ¹Ø©",
        chatSubtitle: "Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ù‹Ø§ Ù‚ØµÙŠØ±Ù‹Ø§ Ø¹Ù† Ø§Ù„ÙˆØµÙØ§Øª Ø£Ùˆ Ø¨Ø±Ø¬Ùƒ.",
        chatWelcome: "Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ Ø£Ù†Ø§ Ø´ÙŠÙ-Ø£ÙŠ Ø¢ÙŠ. Ø£Ø®Ø¨Ø±Ù†ÙŠ Ø¨Ø¨Ø±Ø¬Ùƒ ÙˆÙ…Ø§ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡ (Ù…Ø«Ù„Ø§Ù‹: Â« ÙÙƒØ±Ø© Ø¹Ø´Ø§Ø¡ Ø®ÙÙŠÙ Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø£Ø³Ø¯ Â»).",
      }
    };

    const i18nMap = {
      brandTagline: "[data-i18n='brandTagline']",
      qrInside: "[data-i18n='qrInside']",
      qrLegend: "[data-i18n='qrLegend']",
      pillLabel: "[data-i18n='pillLabel']",
      pageTitle: "[data-i18n='pageTitle']",
      pageSubtitle: "[data-i18n='pageSubtitle']",
      langLabel: "[data-i18n='langLabel']",
      chefTitle: "[data-i18n='chefTitle']",
      chefDesc: "[data-i18n='chefDesc']",
      chefPill: "[data-i18n='chefPill']",
      labelSign: "[data-i18n='labelSign']",
      labelState: "[data-i18n='labelState']",
      labelMeal: "[data-i18n='labelMeal']",
      labelLang: "[data-i18n='labelLang']",
      stateBalanced: "[data-i18n='stateBalanced']",
      stateEnergy: "[data-i18n='stateEnergy']",
      stateRelax: "[data-i18n='stateRelax']",
      stateFocus: "[data-i18n='stateFocus']",
      stateLove: "[data-i18n='stateLove']",
      mealBreakfast: "[data-i18n='mealBreakfast']",
      mealLunch: "[data-i18n='mealLunch']",
      mealDinner: "[data-i18n='mealDinner']",
      mealSnack: "[data-i18n='mealSnack']",
      btnGenerate: "[data-i18n='btnGenerate']",
      statusIdle: "#status",
      recipesTitle: "[data-i18n='recipesTitle']",
      recipesDesc: "[data-i18n='recipesDesc']",
      recipesPlaceholderKicker: "[data-i18n='recipesPlaceholderKicker']",
      recipesPlaceholderTitle: "[data-i18n='recipesPlaceholderTitle']",
      recipesPlaceholderBody: "[data-i18n='recipesPlaceholderBody']",
      recipesPlaceholderTag: "[data-i18n='recipesPlaceholderTag']",
      shopTitle: "[data-i18n='shopTitle']",
      shopDesc: "[data-i18n='shopDesc']",
      shopPill: "[data-i18n='shopPill']",
      pack1Badge: "[data-i18n='pack1Badge']",
      pack1Tagline: "[data-i18n='pack1Tagline']",
      pack1Title: "[data-i18n='pack1Title']",
      pack1Desc: "[data-i18n='pack1Desc']",
      pack1Price: "[data-i18n='pack1Price']",
      pack1Note: "[data-i18n='pack1Note']",
      pack1Format: "[data-i18n='pack1Format']",
      pack2Badge: "[data-i18n='pack2Badge']",
      pack2Tagline: "[data-i18n='pack2Tagline']",
      pack2Title: "[data-i18n='pack2Title']",
      pack2Desc: "[data-i18n='pack2Desc']",
      pack2Price: "[data-i18n='pack2Price']",
      pack2Note: "[data-i18n='pack2Note']",
      pack2Format: "[data-i18n='pack2Format']",
      pack3Badge: "[data-i18n='pack3Badge']",
      pack3Tagline: "[data-i18n='pack3Tagline']",
      pack3Title: "[data-i18n='pack3Title']",
      pack3Desc: "[data-i18n='pack3Desc']",
      pack3Price: "[data-i18n='pack3Price']",
      pack3Note: "[data-i18n='pack3Note']",
      pack3Format: "[data-i18n='pack3Format']",
      btnBuy: "[data-i18n='btnBuy']",
      btnDetails: "[data-i18n='btnDetails']",
      chatTitle: "[data-i18n='chatTitle']",
      chatSubtitle: "[data-i18n='chatSubtitle']",
      chatWelcome: "[data-i18n='chatWelcome']",
    };

    function setStatusHTML(key, lang) {
      const el = document.getElementById("status");
      if (!el) return;
      el.innerHTML = i18n[lang][key] || "";
    }

    function applyI18n(lang) {
      const dict = i18n[lang] || i18n.fr;

      for (const [key, selector] of Object.entries(i18nMap)) {
        const value = dict[key];
        if (!value) continue;
        const nodes = document.querySelectorAll(selector);
        nodes.forEach((node) => {
          if (key.startsWith("status")) {
            // status handled separately
            return;
          }
          if (key === "chefDesc" || key === "shopDesc" || key === "qrLegend") {
            node.innerHTML = value;
          } else if (key === "qrInside") {
            node.innerText = value.replace(/\\n/g, "\n");
          } else {
            node.textContent = value;
          }
        });
      }

      setStatusHTML("statusIdle", lang);

      // Options texte de quelques selects
      const stateSelect = document.getElementById("state");
      if (stateSelect) {
        const optMap = [
          ["equilibre", "stateBalanced"],
          ["energie", "stateEnergy"],
          ["detente", "stateRelax"],
          ["focus", "stateFocus"],
          ["romantique", "stateLove"],
        ];
        [...stateSelect.options].forEach((opt) => {
          const found = optMap.find((m) => m[0] === opt.value);
          if (found && dict[found[1]]) opt.textContent = dict[found[1]];
        });
      }

      const mealSelect = document.getElementById("meal");
      if (mealSelect) {
        const optMap = [
          ["petit_dej", "mealBreakfast"],
          ["dejeuner", "mealLunch"],
          ["diner", "mealDinner"],
          ["snack", "mealSnack"],
        ];
        [...mealSelect.options].forEach((opt) => {
          const found = optMap.find((m) => m[0] === opt.value);
          if (found && dict[found[1]]) opt.textContent = dict[found[1]];
        });
      }

      document.body.dir = lang === "ar" ? "rtl" : "ltr";
    }

    // ------------------ LOGIQUE RECETTES ------------------
    function renderRecipes(recipes, lang) {
      const grid = document.getElementById("recipes-grid");
      if (!grid) return;

      if (!recipes || !recipes.length) {
        grid.innerHTML = "";
        const card = document.createElement("article");
        card.className = "recipe-card";
        card.innerHTML = `
          <div class="recipe-kicker">${i18n[lang].recipesPlaceholderKicker}</div>
          <div class="recipe-title">${i18n[lang].recipesPlaceholderTitle}</div>
          <div class="recipe-body">${i18n[lang].recipesPlaceholderBody}</div>
          <div class="recipe-foot">
            <span class="recipe-tag">${i18n[lang].recipesPlaceholderTag}</span>
            <span>â± ~</span>
          </div>
        `;
        grid.appendChild(card);
        return;
      }

      grid.innerHTML = "";
      recipes.slice(0, 3).forEach((r, idx) => {
        const card = document.createElement("article");
        card.className = "recipe-card";
        const title = r.title || r.name || `Recette ${idx + 1}`;
        const prep = r.preparation || r.steps || r.description || "";
        const energy = r.energy || r.vibe || "";
        const time = r.time || r.duration || "~";
        card.innerHTML = `
          <div class="recipe-kicker">${energy || "Chef-AI"}</div>
          <div class="recipe-title">${title}</div>
          <div class="recipe-body">${prep}</div>
          <div class="recipe-foot">
            <span class="recipe-tag">${i18n[lang].recipesPlaceholderTag}</span>
            <span>â± ${time}</span>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    async function callChefAi({ sign, state, meal, lang }) {
      const payload = {
        sign,
        state,
        mealType: meal,
        lang,
        mode: "recipes",
      };

      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });

      if (!res.ok) {
        throw new Error("HTTP " + res.status);
      }
      return res.json();
    }

    // ------------------ CHAT ------------------
    function addChatMessage(text, who = "ai") {
      const box = document.getElementById("chat-messages");
      if (!box) return;
      const div = document.createElement("div");
      div.className = "msg " + who;
      div.textContent = text;
      box.appendChild(div);
      box.scrollTop = box.scrollHeight;
    }

    async function callChefAiChat({ text, sign, lang }) {
      const payload = {
        mode: "chat",
        message: text,
        sign,
        lang,
      };

      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });

      if (!res.ok) throw new Error("HTTP " + res.status);
      return res.json();
    }

    // ------------------ INIT ------------------
    document.addEventListener("DOMContentLoaded", () => {
      let currentLang = "fr";
      applyI18n(currentLang);

      // Lang buttons
      document.querySelectorAll(".lang-switch button").forEach((btn) => {
        btn.addEventListener("click", () => {
          const lang = btn.getAttribute("data-lang");
          if (!lang) return;
          currentLang = lang;
          document
            .querySelectorAll(".lang-switch button")
            .forEach((b) => b.classList.remove("is-active"));
          btn.classList.add("is-active");
          applyI18n(currentLang);
        });
      });

      // Generate button
      const generateBtn = document.getElementById("generate-btn");
      const statusEl = document.getElementById("status");

      if (generateBtn && statusEl) {
        generateBtn.addEventListener("click", async () => {
          const sign = document.getElementById("sign").value;
          const state = document.getElementById("state").value;
          const meal = document.getElementById("meal").value;
          const recipesLang = document.getElementById("recipes-lang").value;

          setStatusHTML("statusLoading", currentLang);
          generateBtn.disabled = true;

          try {
            const data = await callChefAi({
              sign,
              state,
              meal,
              lang: recipesLang,
            });

            console.log("Chef-AI response:", data);

            const recipes = data.recipes || data.result || data.items || [];
            renderRecipes(recipes, currentLang);
            setStatusHTML("statusOk", currentLang);
          } catch (err) {
            console.error("Chef-AI error:", err);
            setStatusHTML("statusError", currentLang);
          } finally {
            generateBtn.disabled = false;
          }
        });
      }

      // Packs (just console log for maintenant)
     document.querySelectorAll(".btn-pack.primary").forEach((btn) => {
  btn.addEventListener("click", () => {
    const pack = btn.getAttribute("data-pack");
    window.location.href = `${BUSINESS_URL}?pack=${encodeURIComponent(pack)}`;
  });
});


      // Chat
      const chatToggle = document.getElementById("chat-toggle");
      const chatPanel = document.getElementById("chat-panel");
      const chatClose = document.getElementById("chat-close");
      const chatForm = document.getElementById("chat-form");
      const chatInput = document.getElementById("chat-input");

      if (chatToggle && chatPanel) {
        chatToggle.addEventListener("click", () => {
          chatPanel.classList.toggle("open");
        });
      }
      if (chatClose && chatPanel) {
        chatClose.addEventListener("click", () => {
          chatPanel.classList.remove("open");
        });
      }

      if (chatForm && chatInput) {
        chatForm.addEventListener("submit", async (e) => {
          e.preventDefault();
          const text = chatInput.value.trim();
          if (!text) return;
          addChatMessage(text, "user");
          chatInput.value = "";

          try {
            const sign = document.getElementById("sign").value || "aries";
            const data = await callChefAiChat({
              text,
              sign,
              lang: currentLang,
            });
            const reply =
              data.message ||
              data.answer ||
              (data.recipes && data.recipes[0] && data.recipes[0].description) ||
              "Chef-AI a rÃ©pondu, mais le format est diffÃ©rent. VÃ©rifie la console.";
            addChatMessage(reply, "ai");
          } catch (err) {
            console.error("Chef-AI chat error:", err);
            addChatMessage(
              "Impossible de contacter /api/chefai pour le chat. VÃ©rifie le backend.",
              "ai"
            );
          }
        });
      }
    });
  </script>
</body>
</html>
